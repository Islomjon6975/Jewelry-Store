{{ 'style.pdp.css' | asset_url | stylesheet_tag}}
<script src="{{ 'script.pdp.js' | asset_url }}" defer></script>

<div class="pdp">
  <div class="image-modal">
    <div class="image-modal__wrapper">
      <span class="close">
        {% render 'icon-close' %}
      </span>
      <div class="modal__images">
        {% for item in product.images %}
          <img class="modal__image lazyload" src="{{ item.src | img_url }}" data-src="{{ img_url }}" data-widths="[540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]" data-aspectratio="{{ section.settings.pdp_img.aspect_ratio }}" data-sizes="auto" data-parent-fit="cover" alt="{{ section.settings.pdp_img.alt | escape }}">
        {% endfor %}
      </div>
    </div>
  </div>
  <div class="pdp__container">
    <div class="pdp__image--container">
      <div class="pdp__images--wrapper">
        {% for item in product.images %}
          <img class="pdp__image--item lazyload" src="{{ item.src | img_url }}" data-src="{{ img_url }}" data-widths="[540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]" data-aspectratio="{{ section.settings.pdp_img.aspect_ratio }}" data-sizes="auto" data-parent-fit="cover" alt="{{ section.settings.pdp_img.alt | escape }}">
        {% endfor %}
      </div>
      <div class="pdp__image--wrapper">
        <img class="pdp__image lazyload" src="{{ product.featured_image.src | img_url }}" data-src="{{ img_url }}" data-widths="[540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]" data-aspectratio="{{ section.settings.pdp_img.aspect_ratio }}" data-sizes="auto" data-parent-fit="cover" alt="{{ section.settings.pdp_img.alt | escape }}">
      </div>
    </div>
    <div class="pdp__details--container">
      <h4 class="product__type">{{ product.type }}</h4>
      <h1 class="product__title">{{ product.title }}</h1>
      <h2 class="product__price">{{ product.price | money }}</h2>
      {% if product.variants  %}
        <select class="select select_size h4" id="" data-set="{{ product.variants }}">
          <option class="option h4" value="Select Size" selected disabled>Select Size</option>
          {% for variant in product.variants %}
            <script>
              console.log({{variant.option1 | json }}, 'size')
            </script>
            <option data-variant={{variant}} class="option option_size h4" value="{{ variant.option1 }}">{{ variant.option1 }}
            </option>
          {% endfor %}
        </select>
      {% endif %}
      {% render 'secondary-button', title: 'Add To Cart', width: '253px' %}
    </div>
  </div>
</div>

<script>
  const opt = {
    style: 'currency',
    currency: 'USD'
  };
  const select = document.querySelector('.select_size');
  const options = document.querySelectorAll('.option_size');
  const productTitle = document.querySelector('.product__title');
  const productPrice = document.querySelector('.product__price');
  select.addEventListener('change', (e) => {
    console.log(e.target.value, 'value')
    const productVariants = {{ product.variants | json }}
    console.log(productVariants, 'valuevvvv')
    productVariants.forEach(variant => {
      if (variant.option1 == e.target.value) {
        console.log(variant, 'variant')
        productTitle.innerText = variant.name
          ? variant.name
          : "{{ product.title }}"
        const varaintPrice = new Intl.NumberFormat('en-US', opt).format(variant.price / 100);
        console.log(typeof varaintPrice)
        productPrice.innerText = `${varaintPrice}`
      }
    })
  })
</script>