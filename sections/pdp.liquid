{{ 'style.pdp.css' | asset_url | stylesheet_tag}}
<script src="{{ 'script.pdp.js' | asset_url }}" defer></script>

<div class="pdp">
  <div class="image-modal">
    <div class="image-modal__wrapper">
      <span class="close">
        {% render 'icon-close' %}
      </span>
      <div class="modal__images">
        {% for item in product.images %}
          <img class="modal__image lazyload" src="{{ item.src | img_url }}" data-src="{{ img_url }}" data-widths="[540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]" data-aspectratio="{{ section.settings.pdp_img.aspect_ratio }}" data-sizes="auto" data-parent-fit="cover" alt="{{ section.settings.pdp_img.alt | escape }}">
        {% endfor %}
      </div>
    </div>
  </div>
  <div class="pdp__container">
    <div class="pdp__image--container">
      <div class="pdp__images--wrapper">
        {% for item in product.images %}
          <img class="pdp__image--item lazyload" src="{{ item.src | img_url }}" data-src="{{ img_url }}" data-widths="[540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]" data-aspectratio="{{ section.settings.pdp_img.aspect_ratio }}" data-sizes="auto" data-parent-fit="cover" alt="{{ section.settings.pdp_img.alt | escape }}">
        {% endfor %}
      </div>
      <div class="pdp__image--wrapper">
        <img class="pdp__image lazyload" src="{{ product.featured_image.src | img_url }}" data-src="{{ img_url }}" data-widths="[540, 720, 900, 1080, 1296, 1512, 1728, 1944, 2048]" data-aspectratio="{{ section.settings.pdp_img.aspect_ratio }}" data-sizes="auto" data-parent-fit="cover" alt="{{ section.settings.pdp_img.alt | escape }}">
      </div>
    </div>
    <div class="pdp__details--container">
      <h4 class="product__type">{{ product.type }}</h4>
      <h1 class="product__title">{{ product.title }}</h1>
      <h2 class="product__price">{{ product.price | money }}</h2>
      {% if product.variants  %}
        <select class="select select_size h4" id="" data-set="{{ product.variants }}">
          <option class="option h4" value="Select Size" selected disabled>Select Size</option>
          {% for variant in product.variants %}
            <script>
              console.log({{variant.option1 | json }}, 'size')
            </script>
            <option data-variant={{variant}} class="option option_size h4" value="{{ variant.option1 }}">{{ variant.option1 }}
            </option>
          {% endfor %}
        </select>
      {% endif %}
      {% render 'secondary-button', title: 'Add To Cart', width: '253px' %}
      <div class="pdp__product__info">
        {% assign product_info = product.metafields.accentuate.product_info %}
        {{ product_info }}
      </div>
      <div class="pdp__product__description">
        {% assign product_description = product.metafields.accentuate.product_description %}
        {{ product_description }}
      </div>
      <div class="pdp__product__details">
        {% assign product_details = product.metafields.accentuate.product_details %}
        {{ product_details }}
      </div>
      <div class="pdp__product__contact">
        {% assign product_contact = product.metafields.accentuate.product_contact_us %}
        {{ product_contact }}
      </div>

    </div>
  </div>
  <div class="pdp__banner__metafield">
    banner
  </div>
  <div class="pdp__you-might-also-like">
    {% assign selected_handles = product.metafields.accentuate.banner_image | split: "|" %}
    <p>1</p>
    {% for product in selected_handles %}{% endfor %}
    <img src="{{all_products[product].featured_image.src | img_url: 'large' }}" alt="">

    {% render 'card', product: all_products[product] %}
  </div>
</div>

<script>
  const opt = {
    style: 'currency',
    currency: 'USD'
  };
  const select = document.querySelector('.select_size');
  const options = document.querySelectorAll('.option_size');
  const productTitle = document.querySelector('.product__title');
  const productPrice = document.querySelector('.product__price');
  select.addEventListener('change', (e) => {
    const productVariants = {{ product.variants | json }};
    productVariants.forEach(variant => {
      if (variant.option1 == e.target.value) {
        productTitle.innerText = variant.name
          ? variant.name
          : "{{ product.title }}"
        const varaintPrice = new Intl.NumberFormat('en-US', opt).format(variant.price / 100);
        productPrice.innerText = `${varaintPrice}`
      }
    })
  })
</script>